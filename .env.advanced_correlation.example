# =============================================================================
# ПРОДВИНУТЫЕ НАСТРОЙКИ КОРРЕЛЯЦИОННОГО АНАЛИЗА
# =============================================================================
# Добавьте эти параметры в ваш .env файл для использования продвинутого
# менеджера корреляций с улучшенными алгоритмами и метриками.
#
# Документация: ADVANCED_CORRELATION_GUIDE.md
# =============================================================================

# ===== БАЗОВЫЕ ПАРАМЕТРЫ КОРРЕЛЯЦИИ =====
# (Обязательные - уже есть в основном .env)

CORRELATION_CHECK_ENABLED=true
CORRELATION_MAX_THRESHOLD=0.7
CORRELATION_MAX_POSITIONS_PER_GROUP=1
CORRELATION_LOOKBACK_DAYS=30

# ===== ПРОДВИНУТЫЙ АНАЛИЗ =====

# Включить продвинутый анализ корреляций
CORRELATION_USE_ADVANCED=true

# Использовать Spearman rank correlation (монотонные зависимости)
CORRELATION_USE_SPEARMAN=true

# Использовать Dynamic Time Warping (требует больше ресурсов!)
# Полезно для обнаружения корреляций с временным лагом
CORRELATION_USE_DTW=false

# ===== ROLLING WINDOWS (ОКНА АНАЛИЗА) =====

# Короткое окно (дней) - отражает текущую динамику
CORRELATION_SHORT_WINDOW=7

# Среднее окно (дней) - среднесрочные тренды
CORRELATION_MEDIUM_WINDOW=14

# Длинное окно (дней) - долгосрочные структурные корреляции
CORRELATION_LONG_WINDOW=30

# Веса окон (должны в сумме давать ~1.0)
# Больший вес короткому окну = быстрая адаптация к изменениям
# Больший вес длинному окну = стабильность, меньше ложных срабатываний

CORRELATION_SHORT_WEIGHT=0.5
CORRELATION_MEDIUM_WEIGHT=0.3
CORRELATION_LONG_WEIGHT=0.2

# ===== МЕТОДЫ ГРУППИРОВКИ =====

# Метод группировки коррелирующих активов
# Опции:
#   - greedy        : Простой жадный алгоритм (быстро, но менее точно)
#   - louvain       : Community detection на графах (быстро и точно)
#   - hierarchical  : Иерархическая кластеризация (точно, средняя скорость)
#   - ensemble      : Консенсус нескольких методов (самый точный, медленнее)

CORRELATION_GROUPING_METHOD=ensemble

# ===== DYNAMIC TIME WARPING (DTW) ПАРАМЕТРЫ =====

# Максимальный временной лаг для поиска корреляции (часы)
# Например, если альткоин обычно следует за BTC с задержкой 6 часов
CORRELATION_DTW_MAX_LAG_HOURS=24

# Размер окна анализа для DTW (часы)
# 168 часов = 7 дней
CORRELATION_DTW_WINDOW_HOURS=168

# ===== ДЕТЕКЦИЯ РЕЖИМА КОРРЕЛЯЦИЙ =====

# Автоматически определять режим рынка и адаптировать параметры
CORRELATION_REGIME_DETECTION=true

# Пороги для определения режимов
# Эти значения сравниваются со средней корреляцией по всему рынку

# Низкие корреляции: диверсификация работает хорошо
CORRELATION_REGIME_LOW_THRESHOLD=0.4

# Умеренные корреляции: нормальные условия
CORRELATION_REGIME_MODERATE_THRESHOLD=0.6

# Высокие корреляции: сильный тренд, все движется вместе
CORRELATION_REGIME_HIGH_THRESHOLD=0.75

# Кризисные корреляции: паника, все падает одновременно
CORRELATION_REGIME_CRISIS_THRESHOLD=0.85

# ===== КЛАСТЕРИЗАЦИЯ ПО ВОЛАТИЛЬНОСТИ =====

# Группировать активы по уровню волатильности
# Позволяет избежать концентрации в высоковолатильных активах
CORRELATION_VOLATILITY_CLUSTERING=true

# Количество кластеров волатильности
# Например, 3 = Low vol, Medium vol, High vol
CORRELATION_VOLATILITY_CLUSTERS=3

# =============================================================================
# РЕКОМЕНДОВАННЫЕ КОНФИГУРАЦИИ ПО ПРОФИЛЯМ РИСКА
# =============================================================================

# ===== КОНСЕРВАТИВНЫЙ ПРОФИЛЬ (Минимум риска) =====
# Раскомментируйте для использования:
#
# CORRELATION_USE_ADVANCED=true
# CORRELATION_USE_SPEARMAN=true
# CORRELATION_USE_DTW=false
# CORRELATION_MAX_THRESHOLD=0.6
# CORRELATION_MAX_POSITIONS_PER_GROUP=1
# CORRELATION_SHORT_WEIGHT=0.2
# CORRELATION_MEDIUM_WEIGHT=0.3
# CORRELATION_LONG_WEIGHT=0.5
# CORRELATION_GROUPING_METHOD=ensemble
# CORRELATION_REGIME_DETECTION=true
# CORRELATION_VOLATILITY_CLUSTERING=true

# ===== СБАЛАНСИРОВАННЫЙ ПРОФИЛЬ (Рекомендуется) =====
# Раскомментируйте для использования:
#
# CORRELATION_USE_ADVANCED=true
# CORRELATION_USE_SPEARMAN=true
# CORRELATION_USE_DTW=false
# CORRELATION_MAX_THRESHOLD=0.7
# CORRELATION_MAX_POSITIONS_PER_GROUP=2
# CORRELATION_SHORT_WEIGHT=0.5
# CORRELATION_MEDIUM_WEIGHT=0.3
# CORRELATION_LONG_WEIGHT=0.2
# CORRELATION_GROUPING_METHOD=ensemble
# CORRELATION_REGIME_DETECTION=true
# CORRELATION_VOLATILITY_CLUSTERING=true

# ===== АГРЕССИВНЫЙ ПРОФИЛЬ (Максимум торговых возможностей) =====
# Раскомментируйте для использования:
#
# CORRELATION_USE_ADVANCED=true
# CORRELATION_USE_SPEARMAN=true
# CORRELATION_USE_DTW=true
# CORRELATION_MAX_THRESHOLD=0.8
# CORRELATION_MAX_POSITIONS_PER_GROUP=3
# CORRELATION_SHORT_WEIGHT=0.6
# CORRELATION_MEDIUM_WEIGHT=0.3
# CORRELATION_LONG_WEIGHT=0.1
# CORRELATION_GROUPING_METHOD=louvain
# CORRELATION_REGIME_DETECTION=true
# CORRELATION_VOLATILITY_CLUSTERING=false

# =============================================================================
# ПРОИЗВОДИТЕЛЬНОСТЬ
# =============================================================================

# Время инициализации для 170 торговых пар (примерно):
#   - Greedy only:        ~2 сек
#   - Louvain:            ~4 сек
#   - Hierarchical:       ~5 сек
#   - Ensemble:           ~10 сек
#   - Ensemble + DTW:     ~25 сек

# Рекомендации:
#   - Production: ensemble без DTW
#   - Backtesting: включить DTW для максимальной точности
#   - Быстрый старт: louvain

# =============================================================================
# ПРИМЕЧАНИЯ
# =============================================================================

# 1. DTW (Dynamic Time Warping) очень ресурсоемкий. Включайте только если:
#    - Торгуете парами с возможным временным лагом
#    - Есть достаточно мощный сервер
#    - Важна максимальная точность корреляционного анализа

# 2. Ensemble method - самый точный, но медленнее других.
#    Louvain - хороший баланс точности и скорости.

# 3. При включенной детекции режима, система автоматически подстраивает
#    CORRELATION_MAX_THRESHOLD и CORRELATION_MAX_POSITIONS_PER_GROUP
#    в зависимости от текущих рыночных условий.

# 4. Volatility clustering помогает избежать ситуаций, когда несколько
#    высоковолатильных активов создают огромный риск даже при низкой корреляции.

# 5. Все параметры можно динамически изменять без перезапуска бота
#    (после внедрения hot-reload конфигурации).
